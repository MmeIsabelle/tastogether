<div class="container">
  <%# Dark brown div on top of page: %>
  <div class="bg-secondary py-3 d-flex justify-content-around align-items-center">
    <h1><%= @tasting.title.capitalize %></h1>
  </div>
  <%# Div for everything else (excluding navbar on the bottom) %>
  <div>
    <div class="d-flex justify-content-between">
      <div>
        <div class="modal fade" id="myModal">
          <div class="modal-dialog modal-sm">
            <div class="modal-content">
              <div class="modal-header">
                <h1><%=@host.username%>'s bio:</h1>
              </div>
              <div class="modal-body">
                <%=@host.bio%>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <%# <input class="btn btn-default" data-dismiss="modal" value="Close"> %>
              </div>
            </div>
          </div>
        </div>
        <a href="#" data-toggle="modal" data-target="#myModal"><%=@host.username%></a>
      </div>
      <p>Rating: ☆☆☆☆☆</p>
    </div>
    <div class="d-flex justify-content-center">
      <% if @tasting.photo.attached? %>
        <%= cl_image_tag @tasting.photo.key%>
      <% else %>
        <%= image_tag @tasting.image, height: 400%>
      <% end %>
    </div>
    #category1 #category2 #category3
    <div>
      <h3>Description</h3>
      <%= @tasting.description %>
    </div>
    <strong> Guests: <%= @tasting.participations.accepted.count-1%>/<%= @tasting.capacity%> </strong>
    <div>
       <% @tasting.participations.each do |participant| %>
        <% unless participant.host %>
          <%= participant.user.username %>
        <% end %>
      <% end %>
    </div>
    <div>
      <% unless current_user.tastings.include?(@tasting) %>
        <h3 class="text-center">Want to join?</h3>
        <%= simple_form_for [ @tasting, @participation ] do |f| %>
          <%= f.input :initial_message, label: 'Write a message to the host to introduce yourself' %>
          <%= f.submit "Send my request", class: "btn btn-primary rounded-pill my-3" %>
        <% end %>
      <% end %>
    </div>
    <div>
      <% if current_user.hosted_tastings.include?(@tasting)%>
        <% @tasting.participations.pending.each do |participation| %>
        <div>
          <p><%= participation.user.email %> requested to attend this tasting</p>
          <p><%= participation.initial_message %></p>
          <div>
            <%= simple_form_for participation do |f| %>
              <%= f.hidden_field :status, value: "accepted" %>
              <%= f.button :submit, "Accept" %>
            <% end %>
          </div>
          <div>
            <%= simple_form_for participation do |f| %>
              <%= f.hidden_field :status, value: "decline" %>
              <%= f.button :submit, "Decline" %>
            <% end %>
          </div>
          <hr>
        </div>
        <% end %>
      <% end %>
    </div>
    <%= link_to "Other Tastings", tastings_path %>
  </div>
</div>
